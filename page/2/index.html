<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="前端博客 | hexo | github">
<meta property="og:type" content="website">
<meta property="og:title" content="芥子园 | xiaqingsong's blog">
<meta property="og:url" content="http://mmrxia.github.io/page/2/index.html">
<meta property="og:site_name" content="芥子园 | xiaqingsong's blog">
<meta property="og:description" content="前端博客 | hexo | github">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="芥子园 | xiaqingsong's blog">
<meta name="twitter:description" content="前端博客 | hexo | github">
    
    <title>
        芥子园 | xiaqingsong&#39;s blog
    </title>
    <link rel="alternative" href="/atom.xml" title="芥子园 | xiaqingsong&#39;s blog" type="application/atom+xml"> 
    <link rel="icon" href="http://7xth8v.com2.z0.glb.clouddn.com/icon/favicon.ico"> 
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/prism.css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://7xth8v.com2.z0.glb.qiniucdn.com/image/avatar_150x150.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">芥子园</a></h1>
		</hgroup>

		
		<p class="header-subtitle">须弥藏芥子，芥子纳须弥</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/tags/随笔/">随笔</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/mmrxia" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/u/1984883035" title="weibo">weibo</a>
					        
								<a class="twitter" target="_blank" href="https://twitter.com/xiaqingsong" title="twitter">twitter</a>
					        
								<a class="linkedin" target="_blank" href="http://www.linkedin.com/in/mrxia" title="linkedin">linkedin</a>
					        
								<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Linux/" style="font-size: 13.33px;">Linux</a> <a href="/tags/base64/" style="font-size: 10px;">base64</a> <a href="/tags/bash/" style="font-size: 10px;">bash</a> <a href="/tags/bigPipe/" style="font-size: 10px;">bigPipe</a> <a href="/tags/cnpm/" style="font-size: 10px;">cnpm</a> <a href="/tags/express/" style="font-size: 10px;">express</a> <a href="/tags/git/" style="font-size: 16.67px;">git</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/js/" style="font-size: 16.67px;">js</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/mongodb/" style="font-size: 16.67px;">mongodb</a> <a href="/tags/nodejs/" style="font-size: 20px;">nodejs</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/sku/" style="font-size: 10px;">sku</a> <a href="/tags/uuid/" style="font-size: 10px;">uuid</a> <a href="/tags/vue/" style="font-size: 10px;">vue</a> <a href="/tags/数组/" style="font-size: 10px;">数组</a> <a href="/tags/移动端开发/" style="font-size: 10px;">移动端开发</a> <a href="/tags/算法/" style="font-size: 10px;">算法</a> <a href="/tags/西游记/" style="font-size: 13.33px;">西游记</a> <a href="/tags/跨域/" style="font-size: 10px;">跨域</a> <a href="/tags/随笔/" style="font-size: 16.67px;">随笔</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.xiaqingsong.com">XQS</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.morg.cn">MORG</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.iamaddy.net/">Addy的网络日志</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://jiongks.name/">勾三股四</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">夏青松，2013年毕业于江西农大软件学院软件工程专业。<br/> <b>2012.10-2015.2</b> [北京] 锐捷网络<br/> <b>2015.2-至今</b> [杭州] 妈妈好网络<br/><br/> Mail：this.xqs@gmail.com </div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">芥子园</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="http://7xth8v.com2.z0.glb.qiniucdn.com/image/avatar_150x150.jpg" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">芥子园</h1>
			</hgroup>
			
			<p class="header-subtitle">须弥藏芥子，芥子纳须弥</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/tags/随笔/">随笔</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/mmrxia" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/u/1984883035" title="weibo">weibo</a>
			        
						<a class="twitter" target="_blank" href="https://twitter.com/xiaqingsong" title="twitter">twitter</a>
			        
						<a class="linkedin" target="_blank" href="http://www.linkedin.com/in/mrxia" title="linkedin">linkedin</a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="post-使用淘宝npm镜像cnpm" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/08/05/使用淘宝npm镜像cnpm/" class="article-date">
  	<time datetime="2016-08-05T03:24:36.000Z" itemprop="datePublished">2016-08-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/05/使用淘宝npm镜像cnpm/">使用淘宝npm镜像cnpm</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>在使用 node 模块时可以使用 npm install 查找 package.json 中的声明的依赖模块并安装。  </p>
</blockquote>
<p>但因为国内网络原因，使用 npm 安装某些模块会非常慢，甚至无法安装所有的包。<br>幸运的是,国内有几个镜像站点可以供我们使用,比如 <code>https://registry.cnpmjs.org</code>、<code>https://registry.npm.taobao.org</code>,速度非常快,镜像站会实时更新,为我们节省了好多时间.    </p>
<h5 id="那么-如何给本机换源呢"><a href="#那么-如何给本机换源呢" class="headerlink" title="那么,如何给本机换源呢?"></a>那么,如何给本机换源呢?</h5><p>(1)[临时]通过 <code>config</code> 配置指向国内镜像源</p>
<pre><code class="language-git"># 配置指向源
npm config set registry http://registry.cnpmjs.org
</code></pre>
<p>(2)[临时]通过 <code>npm</code> 命令指定下载源</p>
<pre><code class="language-git">npm --registry http://registry.cnpmjs.org
</code></pre>
<p>(3)[linux]在配置文件 <code>~/.npmrc</code> 文件写入源地址</p>
<pre><code class="language-git">//打开配置文件
nano ~/.npmrc
//写入配置文件
registry =https://registry.npm.taobao.org
</code></pre>
<p>推荐使用最后一种方法,一劳永逸,前面2钟方法都是临时改变包下载源.<br>如果你不想使用国内镜像站点,只需要将 写入 <code>~/.npmrc</code> 的配置内容删除即可.  </p>
<p>配置后可通过下面方式来验证是否成功</p>
<pre><code class="language-git">npm config get registry
// 或
npm info express
</code></pre>
<h5 id="使用cnpm"><a href="#使用cnpm" class="headerlink" title="使用cnpm"></a>使用cnpm</h5><p>或者你也可以安装<code>cnpm</code>包，使用<code>cnpm</code>替代<code>npm</code>：</p>
<pre><code class="language-git">npm install -g cnpm --registry=https://registry.npm.taobao.org
</code></pre>
<p>然后使用 <code>cnpm</code> 安装模块：</p>
<pre><code class="language-git">cnpm install [module-name]
</code></pre>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cnpm/">cnpm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/npm/">npm</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>





<!--网易云跟帖代码-->
<div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
<script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script>
<script>
var cloudTieConfig = {
url: document.location.href,
sourceId: "",
productKey: "17aa32dc2264402789450912a85cf52b",
target: "cloud-tie-wrapper"
};
var yunManualLoad = true;
Tie.loader("aHR0cHM6Ly9hcGkuZ2VudGllLjE2My5jb20vcGMvbGl2ZXNjcmlwdC5odG1s", true);
</script>



  
    <article id="post-html5在iOS设备上传图片调整方向实践" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/18/html5在iOS设备上传图片调整方向实践/" class="article-date">
  	<time datetime="2016-07-18T11:56:54.000Z" itemprop="datePublished">2016-07-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/18/html5在iOS设备上传图片调整方向实践/">html5在iOS设备上传图片调整方向实践</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>解决在iOS设备上，用H5上传图片，有时图片方向会错乱的问题。</p>
</blockquote>
<p>用html5编写图片裁切上传，在iphone手机上可能会遇到图片方向错误问题，在此把解决方法和大家分享一下，<br>用到了html5的 FileReader和Canvas，如果还没有接触的同学，先了解一下其方法。   </p>
<pre><code class="language-javascript"> //此方法为file input元素的change事件
 function change(){
    var file = this.files[0];
    var orientation;
    //EXIF js 可以读取图片的元信息  https://github.com/exif-js/exif-js
    EXIF.getData(file,function(){
        orientation=EXIF.getTag(this,&#39;Orientation&#39;);
    });
    var reader = new FileReader();
    reader.onload = function(e) {   
        getImgData(this.result,orientation,function(data){
            //这里可以使用校正后的图片data了 
        }); 
    }
    reader.readAsDataURL(file);
}
</code></pre>
<p>下面是具体的处理方式：</p>
<pre><code class="language-javascript">// @param {string} img 图片的base64
// @param {int} dir exif获取的方向信息
// @param {function} next 回调方法，返回校正方向后的base64
function getImgData(img,dir,next){
  var image=new Image();
  image.onload=function(){
    var degree=0,drawWidth,drawHeight,width,height;
    drawWidth=this.naturalWidth;
    drawHeight=this.naturalHeight;
    //以下改变一下图片大小
    var maxSide = Math.max(drawWidth, drawHeight);
    if (maxSide &gt; 1024) {
        var minSide = Math.min(drawWidth, drawHeight);
        minSide = minSide / maxSide * 1024;
        maxSide = 1024;
        if (drawWidth &gt; drawHeight) {
            drawWidth = maxSide;
            drawHeight = minSide;
        } else {
            drawWidth = minSide;
            drawHeight = maxSide;
        }
    }
    var canvas=document.createElement(&#39;canvas&#39;);
    canvas.width=width=drawWidth;
    canvas.height=height=drawHeight; 
    var context=canvas.getContext(&#39;2d&#39;);
    //判断图片方向，重置canvas大小，确定旋转角度，iphone默认的是home键在右方的横屏拍摄方式
    switch(dir){
       //iphone横屏拍摄，此时home键在左侧
        case 3:
            degree=180;
            drawWidth=-width;
            drawHeight=-height;
            break;
        //iphone竖屏拍摄，此时home键在下方(正常拿手机的方向)
        case 6:
            canvas.width=height;
            canvas.height=width; 
            degree=90;
            drawWidth=width;
            drawHeight=-height;
            break;
        //iphone竖屏拍摄，此时home键在上方
        case 8:
            canvas.width=height;
            canvas.height=width; 
            degree=270;
            drawWidth=-width;
            drawHeight=height;
            break;
    }
    //使用canvas旋转校正
    context.rotate(degree*Math.PI/180);
    context.drawImage(this,0,0,drawWidth,drawHeight);
    //返回校正图片
    next(canvas.toDataURL(&quot;image/jpeg&quot;,.8));
 }
  image.src=img;
}
</code></pre>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/移动端开发/">移动端开发</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>





<!--网易云跟帖代码-->
<div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
<script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script>
<script>
var cloudTieConfig = {
url: document.location.href,
sourceId: "",
productKey: "17aa32dc2264402789450912a85cf52b",
target: "cloud-tie-wrapper"
};
var yunManualLoad = true;
Tie.loader("aHR0cHM6Ly9hcGkuZ2VudGllLjE2My5jb20vcGMvbGl2ZXNjcmlwdC5odG1s", true);
</script>



  
    <article id="post-centOS下配置git" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/04/centOS下配置git/" class="article-date">
  	<time datetime="2016-07-04T08:14:54.000Z" itemprop="datePublished">2016-07-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/04/centOS下配置git/">centOS下配置git</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="1-安装git"><a href="#1-安装git" class="headerlink" title="1. 安装git"></a>1. 安装git</h4><pre><code class="language-bash">[root@localhost ~]# yum install git
</code></pre>
<h4 id="2-配置git"><a href="#2-配置git" class="headerlink" title="2. 配置git"></a>2. 配置git</h4><p>1 . 进入 <code>.ssh</code> 目录</p>
<pre><code class="language-bash">[root@localhost ~]# cd .ssh/
</code></pre>
<p>2 . 生成ssh-keygen</p>
<pre><code class="language-bash">[root@localhost .ssh]# ssh-keygen -t rsa -C &#39;this.xqs@gmail.com&#39;
</code></pre>
<p>会出现以下提示：</p>
<p>Generating public/private rsa key pair.<br>Enter file in which to save the key (/root/.ssh/id_rsa): （可不填）<br>Enter passphrase (empty for no passphrase):  （可不填）<br>Enter same passphrase again:  （可不填）<br>Your identification has been saved in /root/.ssh/id_rsa.<br>Your public key has been saved in /root/.ssh/id_rsa.pub.<br>The key fingerprint is:<br>8f:8e:89:00:1a:3e:83:d1:95:fc:e8:9c:22:85:4c:a7 this.xqs@gmail.com        </p>
<p>3 . 复制 <code>id_rsa.pub</code> 文件中的内容，粘贴到github新增的ssh keys中。</p>
<pre><code class="language-bash">[root@localhost .ssh]# ls
// id_rsa  id_rsa.pub

[root@localhost .ssh]# vim id_rsa.pub
</code></pre>
<p>4 . 配置用户名和邮箱</p>
<pre><code class="language-bash">[root@localhost .ssh]# git config --global user.name &#39;bandwagonhost vps&#39;
[root@localhost .ssh]# git config --global user.email &#39;this.xqs@gmail.com&#39;
</code></pre>
<p>5 . 测试连接</p>
<pre><code class="language-bash">[root@localhost .ssh]# ssh -T git@github.com
Hi mmrxia! You&#39;ve successfully authenticated, but GitHub does not provide shell access.
</code></pre>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>





<!--网易云跟帖代码-->
<div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
<script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script>
<script>
var cloudTieConfig = {
url: document.location.href,
sourceId: "",
productKey: "17aa32dc2264402789450912a85cf52b",
target: "cloud-tie-wrapper"
};
var yunManualLoad = true;
Tie.loader("aHR0cHM6Ly9hcGkuZ2VudGllLjE2My5jb20vcGMvbGl2ZXNjcmlwdC5odG1s", true);
</script>



  
    <article id="post-centOS下安装nodeJS" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/04/centOS下安装nodeJS/" class="article-date">
  	<time datetime="2016-07-04T06:30:07.000Z" itemprop="datePublished">2016-07-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/04/centOS下安装nodeJS/">centOS下安装nodeJS</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="一、源码安装"><a href="#一、源码安装" class="headerlink" title="一、源码安装"></a>一、源码安装</h4><p>1 . 安装gcc-c编译器</p>
<pre><code class="language-bash">[root@localhost ~]# sudo yum install gcc gcc-c++
</code></pre>
<p>2 . 现在nodejs源码并解压  </p>
<pre><code class="language-bash">[root@localhost ~]# wget https://nodejs.org/dist/v4.4.7/node-v4.4.7-linux-x86.tar.gz
[root@localhost ~]# tar xvf node-v4.4.7-linux-x86
</code></pre>
<p>3 . 编译</p>
<pre><code class="language-bash">[root@localhost ~]# ./configure
[root@localhost ~]# make &amp;&amp; make install
</code></pre>
<h4 id="二、nvm安装"><a href="#二、nvm安装" class="headerlink" title="二、nvm安装"></a>二、nvm安装</h4><p>1 . 获取nvm</p>
<pre><code class="language-bash">wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.31.2/install.sh | bash
</code></pre>
<p>2 . 安装nodejs</p>
<p> 可用 <code>nvm ls-remote</code> 列出所有可安装的node版本，然后安装需要的版本。</p>
<pre><code class="language-bash"> nvm install v4.4.7
</code></pre>
<p>安装完成后可查看node版本。</p>
<pre><code class="language-bash">node -v
</code></pre>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/">nodejs</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>





<!--网易云跟帖代码-->
<div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
<script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script>
<script>
var cloudTieConfig = {
url: document.location.href,
sourceId: "",
productKey: "17aa32dc2264402789450912a85cf52b",
target: "cloud-tie-wrapper"
};
var yunManualLoad = true;
Tie.loader("aHR0cHM6Ly9hcGkuZ2VudGllLjE2My5jb20vcGMvbGl2ZXNjcmlwdC5odG1s", true);
</script>



  
    <article id="post-express学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/01/express学习笔记/" class="article-date">
  	<time datetime="2016-07-01T07:32:01.000Z" itemprop="datePublished">2016-07-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/01/express学习笔记/">express学习笔记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="1-app-render和res-render方法的区别？"><a href="#1-app-render和res-render方法的区别？" class="headerlink" title="1 . app.render和res.render方法的区别？"></a>1 . app.render和res.render方法的区别？</h4><p>官方的api文档中是这么说的：   </p>
<blockquote>
<p>Think of app.render() as a utility function for generating rendered view strings. Internally res.render() uses app.render() to render views.</p>
</blockquote>
<p>我的理解：</p>
<p>把<code>app.render</code>当成一个生成视图的工具，而且<code>res.render</code>内部也是调用了<code>app.render</code>。<br>区别是这样，<code>app.render</code>只负责生成视图，你会发现它是没能力把视图响应给客户端（浏览器）的，只有<code>res.render</code>手里有<code>response</code>对象，可以把视图响应给客户端。<br><code>res.render</code>的伪代码可以看做如下: </p>
<pre><code class="language-javascript">res.render = function(view, locals, cb){
    app.render(view, locals, function(err, html){
        if(typeof cb !== &#39;undefined&#39;){
            return cb(err, html);
        }
        res.send(html);
    });
};
</code></pre>
<h4 id="2-res-write和res-send区别？"><a href="#2-res-write和res-send区别？" class="headerlink" title="2 . res.write和res.send区别？"></a>2 . res.write和res.send区别？</h4><blockquote>
<p>The res object represents the HTTP response that an Express app sends when it gets an HTTP request.</p>
</blockquote>
<p><code>res.write</code>和<code>res.send</code>都是发送报文到浏览器response中，并渲染在浏览器窗口。<br><code>res.write</code>使用时需要配合<code>res.end</code>方法同时使用，否则浏览器http请求会一直处于pending状态，而<code>res.send</code>单独使用即可。    </p>
<p>代码示例：     </p>
<pre><code class="language-javascript">//res.send
app.get(&#39;/user/:id&#39;, function(req, res){
  res.send(&#39;user &#39; + req.params.id);
});

//res.write
app.get(&#39;/user/:id&#39;, function(req, res){
 res.status(200).write(&#39;user &#39; + req.params.id);
 res.end();
});
</code></pre>
<h4 id="3-获取request请求参数的方法？"><a href="#3-获取request请求参数的方法？" class="headerlink" title="3 . 获取request请求参数的方法？"></a>3 . 获取request请求参数的方法？</h4><p>express获取参数有三种方法：  </p>
<p>官网实例：   </p>
<blockquote>
<p>Checks route params (req.params), ex: /user/:id<br>Checks query string params (req.query), ex: ?id=12<br>Checks urlencoded body params (req.body), ex: id=    </p>
</blockquote>
<ul>
<li>例如：127.0.0.1:3000/index，得到index，可以通过使用<code>req.params</code>得到；   </li>
<li>例如：127.0.0.1:3000/index?id=12，这种情况下，这种方式是获取客户端get方式传递过来的值，通过使用<code>req.query.id</code>可以获得；     </li>
<li>例如：127.0.0.1：300/index，然后post了一个id=2的值，这种方式是获取客户端post过来的数据，可以通过<code>req.body.id</code>获取； </li>
</ul>
<p>注：post请求，第三种方式需要以下配置：</p>
<pre><code class="language-javascript">   var express        =         require(&quot;express&quot;);  
   var bodyParser     =         require(&quot;body-parser&quot;);  
   var app            =         express();  

   app.use(bodyParser.urlencoded({ extended: false }));   // necessary
</code></pre>
<h4 id="4-session使用入门"><a href="#4-session使用入门" class="headerlink" title="4 . session使用入门"></a>4 . session使用入门</h4><p><code>express-session</code>是express中比较常用的处理session的中间件,使用npm安装：</p>
<pre><code class="language-git">$ npm install express-session save
</code></pre>
<p>session的认证机制必须依赖cookie，所以还应该同时安装一个<code>cookie-parser</code>，安装方法同上。然后再app.js中导入这两个中间件：</p>
<pre><code class="language-javascript">var cookieParser = require(&#39;cookie-parser&#39;);
var session = require(&#39;express-session&#39;);
</code></pre>
<p>之后定义cookie解析器，注意，该定义必须写在路由分配之前：</p>
<pre><code class="language-javascript">app.use(cookieParser());
app.use(session({
  secret: &#39;secret_string&#39;,
  name: &#39;name&#39;,
  cookie: {maxAge: 60000},
  resave: false,
  saveUninitialized: true,
}));
</code></pre>
<p>各参数意义：<br><code>secret</code>：用来对session数据进行加密的字符串.这个属性值为必须指定的属性。<br><code>name</code>：表示cookie的name，默认cookie的name是：connect.sid。<br><code>maxAge</code>：cookie过期时间，毫秒。<br><code>resave</code>：是指每次请求都重新设置session cookie，假设你的cookie是6000毫秒过期，每次请求都会再设置6000毫秒。<br><code>saveUninitialized</code>： 是指无论有没有session cookie，每次请求都设置个session cookie ，默认给个标示为 connect.sid。     </p>
<p>之后在处理请求时直接通过以下方式对session进行读写：        </p>
<pre><code class="language-javascript">req.session.userinfo = userinfo;  //写入至session
res.redirect(req.session.userinfo); //从session中读取
</code></pre>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/express/">express</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/">nodejs</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>





<!--网易云跟帖代码-->
<div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
<script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script>
<script>
var cloudTieConfig = {
url: document.location.href,
sourceId: "",
productKey: "17aa32dc2264402789450912a85cf52b",
target: "cloud-tie-wrapper"
};
var yunManualLoad = true;
Tie.loader("aHR0cHM6Ly9hcGkuZ2VudGllLjE2My5jb20vcGMvbGl2ZXNjcmlwdC5odG1s", true);
</script>



  
    <article id="post-16年后web开发趋势思考" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/27/16年后web开发趋势思考/" class="article-date">
  	<time datetime="2016-06-27T07:21:44.000Z" itemprop="datePublished">2016-06-27</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/27/16年后web开发趋势思考/">16年后web开发趋势思考</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>Rewriting your Frontend Framework every six week !!!</p>
</blockquote>
<h3 id="近二年的进展"><a href="#近二年的进展" class="headerlink" title="近二年的进展"></a>近二年的进展</h3><p>前端发展日新月异, 甚至有一句戏言: “每六星期重写一个前端框架”, 行业是像火箭一样, 但我们前端工程师该何去何从呢?<br>我们来谈谈这个问题.<br>先来看看最流行的几项技术栈:  </p>
<ul>
<li><p>AngularJS<br>首创的双向数据绑定, 以及内置的模块注入, 以及组件化的支持, 种种优势, 使得它迅速发展起来. 在 2014-2015 年, 有调查显示, 在使用了前端框架的项目, 有 50% 以上采用了 AngularJS. 但到底值不值我们继续学习, 我们再接下来看.<br>项目地址: <a href="https://angularjs.org/" target="_blank" rel="external"></a></p>
</li>
<li><p>EmberJS<br>受 Rails 全栈框架的启发, EmberJS 逐步发展成前端领域的另一个 “Rails”, 成为另一个独特的选择, 理论上, 你选择了 EmberJS, 就选择了一个完整稳定的生态, 不用再折腾的轮子. EmberJS 不仅全面支持模块化, MVC, 也实现了类似 AngularJS 的双向绑定( 当然原理不同 ), 甚至还做到了内置的打包和发布应用功能. 总而言之, 它是一个十分全面的前端框架. 事实上, 如果说 AngularJS 是当前短暂的前端史的一个高峰, 它就是另一个高峰. 但最近, 人气有一定的下降, 原因何在, 我们再分解.<br>项目地址: <a href="http://emberjs.com/" target="_blank" rel="external"></a></p>
</li>
<li><p>ReactJS<br>ReactJS 自发布之始, 就人气很高, 它是第一个采用虚拟节点( virtual dom )技术的框架, 通过这个技术点, 它独创性地整合了函数性编程的理念, 采用单向数据流来设计 dom 渲染与比对, 使得它轻量和灵活, 事实上, 它本身只专注于如何渲染 UI, 也不与 AngularJS 和 EmberJS 有冲突. 换言之, 你可以将它整合到其他框架中.<br>随着 ReactNative 和 Redux 方案的出现, ReactJS 重新回到前端的浪尖, 因为其简洁优雅的实现和对 Native APP 的冲击, 又一次成为新的弄潮儿.<br>但以后会怎么样, 谁也不知道, 但我也会再给一些解读.<br>项目地址: <a href="https://facebook.github.io/react/" target="_blank" rel="external"></a></p>
</li>
</ul>
<p>流行不一定是发展最快, 我们再来看看近二年发展最快的几项前端技术栈:  </p>
<ul>
<li><p>ReactJS<br>上文已经提到, React 由于本身的简洁性和对组件化专注的实现, 一直没有被新的 ES6 标准和前端思潮落下, 它几乎不受 ES6 的影响, 以及前沿性的支持 native app 开发( 通过 ReactNative ), 所以一直发展趋势良好.<br>而 AngularJS 则不一样, 由于 ES6 的发布, 使得它的依赖注入特性成为鸡肋, 以及 AngularJS 第一版对组件化支持的蹩脚实现( 能支持是一回事, 好用是另一回事 ), 而组件化则学习成本过高, 过于复杂, 所以 AngularJS 决定推翻设计重新开发第二版, 而第二版过于激进的采用 Typescript, 完全不兼容的第一版的设计, 以及各种魔法的应用, 使得它离前端越走越远.   </p>
</li>
<li><p>VueJS<br>VueJS 是近二年的新秀, 它起步之初, 只是一个简化版的类似于 AngularJS 双向绑定的实现的研究( 当然原理并不同 ). 但其理念与 ReactJS 相近, 只是专注于实现数据绑定, 模块化与组件化, 所以足够的简单灵活.<br>随着生态的快速发展, VueJS 正好接了 AngularJS 第一版的班, 又改良了 AngularJS 的错误设计( 事后来看, 依赖注入与组件化两部分是比较失败的设计 ), 整体发展迅速, 逐步成为后起之秀.<br>项目地址: <a href="http://vuejs.org/" target="_blank" rel="external"></a></p>
</li>
<li><p>MeteorJS<br>MeteorJS 本不适合与上述几个前端框架比较, 因为它实际是一个全栈框架, 更像 Rails 这种角色, 但由于它是纯 Javascript 的方案, 所以还是放在这里.<br>如果说上述前端框架都是解决前端工程化的产物, 那 MeteorJS 是一个颠覆思维的 web 开发框架, 它将Javascript 同构技术应用到极端, 再整合 websocket 进行实时数据通知与热代码更新, 不同于前后端分离的理念, 它在开发者角度完全没有前后端的概念, API 既在前端又在后端, 再加它全生态的支持( 移动 app 支持, 应用发布), 也是一个全新的视角, 由于它发展速度极快, 所以列在这里.<br>项目地址: <a href="https://www.meteor.com/" target="_blank" rel="external"></a></p>
</li>
</ul>
<p>各大框架都在迅速发展中, 它们有几个共性的发展方向:  </p>
<ul>
<li><p>ES6 支持<br>每一次 Javascript 的新标准发布, 都是各大框架更新的好机会, 所以 ES6 是肯定得到各大框架的良好支持, 建议大家一定要学好.</p>
</li>
<li><p>web 组件化<br>毋庸置疑, 组件化是现代前端工程化中极为重要的特性, 甚至 google 还专门出了 Polymer 这个只做组件化实现的框架. 所以每一个够格的前端框架都非常重度支持它. 同时, 组件化也将作为 w3c 标准予于定义, 所以前端框架仍将不留余力地改进与标准的兼容.</p>
</li>
<li><p>Server-side Render<br>服务端渲染技术是 2016 年才开始火的概念, 它与传统的后端渲染不同, 为了解决前端框架第一次加载慢的问题, 以及 SEO 问题, 而提出的解决方案. 之前有 prerender, 现在各大框架都在尝试在内部集成并支持它. 但我个人觉得, 带来的问题远比解决的问题更多, 比如要求我们开发的时候有更多的限制.</p>
</li>
<li><p>App Render<br>现在有一种大前端的概念, 可以理解为 web 前端对 App 开发的支持, 包括 Ionic ( 基于 AngularJS ), React Native( 基于 React 理念 ), Meteor 都是针对 App 开发的痛点而生.</p>
</li>
</ul>
<p>分析了众多目前最流行的前端框架, 大家可能越来越胡涂了:<br>到底谁才是最值得我们去投入的技术呢?<br>接下来, 我们去掉一堆术语, 来从前端的定义本质来看它的发展. </p>
<h3 id="近二年本质的演进是什么"><a href="#近二年本质的演进是什么" class="headerlink" title="近二年本质的演进是什么"></a>近二年本质的演进是什么</h3><p>前端就是面向用户这一端的技术, 然而, 随着时代的发展:</p>
<ul>
<li>用户体验要求越来越高( 加载速度快, 响应快, 无闪烁 )</li>
<li>前端需求越来越多</li>
<li>前端代码越来越庞大</li>
<li>移动端快速发展对 h5 前端的需求</li>
</ul>
<p>而 jQuery, ProtoypeJS 等只解决了 Javascript 工具库的问题, 但工程化需求无好的解决方案.<br>前端工程化迫在眉捷. 而且有以下要求:   </p>
<ul>
<li>最好是纯 Javascript 方案</li>
<li>支持模块化</li>
<li>业务代码与框架代码分离</li>
<li>可测性</li>
</ul>
<p>于是, 产生了几种不同的演进方案.<br>后端渲染技术:<br>ajax -&gt; pjax -&gt; sjr ( 需要服务端提供支持 )<br>后端渲染技术很快就发展到顶了. 但技术理解还是足够简单的. 我们还是回到前端框架上.<br>NodeJS, AMD(CMD), ES6 的出现, 使得组织起一个前端框架成为现实. 于是乎, 百团大战, 出现了上面众多框架混战的画面.<br>无论是 AngularJS, EmberJS, ReactJS, VueJS 都是围绕着这几点进行的不同的尝试.<br>但结果如何, 我们站在一个更高的高度重新思考 web 开发.      </p>
<h3 id="真正的用户市场需要什么"><a href="#真正的用户市场需要什么" class="headerlink" title="真正的用户市场需要什么"></a>真正的用户市场需要什么</h3><p>对用户   </p>
<ul>
<li>更快的响应速度</li>
<li>更好的体验<br>对开发者</li>
<li>更快的开发速度</li>
<li>更好的可维护性</li>
</ul>
<p>再次思考, 我们要不要前后端分离? 哪些前端框架更满足我们以上的条件?<br>作为 Rails 工程师, 我也一直在思考一个问题: Rails 是否在前端上走上了绝路?<br>对于不熟悉 Rails 的朋友, 我还是简单回顾下 Rails 的前端是什么:</p>
<ul>
<li>jQuery</li>
<li>UJS</li>
<li>Assets pipeline</li>
<li>SJR( 服务端 JS 生成技术 )</li>
<li>Turoblinks( 一种极小成本实现的单页效果的技术 )</li>
</ul>
<p>相比 php, java, python 等语言下的传统 web 框架来说, Rails 的前端技术还是非常丰富的.<br>关于各个框架我列了一个分数比较, 10 分为满分, 每个列会加在一起算成一个总分.<br> <img src="http://7xth8v.com2.z0.glb.qiniucdn.com/image/n-web-score-2016.jpeg" alt=""></p>
<p>从上表可以看出:<br>Rails 这类的全栈框架特点有</p>
<p>优势:</p>
<ul>
<li>开发效率极高</li>
<li>通过 Turoblinks 技术, 体验也不错.</li>
<li>也能支持混合应用开发</li>
</ul>
<p>缺点:</p>
<ul>
<li>前端代码可维护差</li>
</ul>
<p>ReactJS 学习成本较低, 通过 webpack 与 npm 的配合, 能够达到不错的可维护性, 但开发成本偏高, 这也是组件化的缺点之一.<br>而 EmberJS 学习门槛过高, 而且 EmberJS 发展也比较迅速, 不利于学习掌握, 相对而言, 总分也不会太高.<br>MeteorJS 也被我列在这里, 总分最低, 所以仍然不推荐学习, 除非你的应用属于实时应用.<br>我们再重新思考组件化, 组件化优势在于接口清晰, 可维护性高, 但开发成本是比较高的, 前端属于工程而不是科学, 所以, 我觉得组件化是对的, 但不要过于极端把所有的 dom 都组件化.<br>而且, 组件化也对现有的基础技术栈进行了破坏.<br>通过以上的分析, 我们基本上了解了现有技术栈的情况. 那我们该继续学什么? 这才是本文的重点.<br>所有的一切, 都是围绕着组件化, 可维护, 高效开发, 移动支持而生, 而它们的核心都是还是最基础的东西:     </p>
<ul>
<li>Javascript ( ES6, NodeJS )</li>
<li>HTML</li>
<li>CSS</li>
<li>API<br>一句话, 还是应该先把基础打好.</li>
</ul>
<h3 id="基础技术栈"><a href="#基础技术栈" class="headerlink" title="基础技术栈"></a>基础技术栈</h3><p>应当好好掌握的内容:</p>
<ul>
<li>Javascript 语言( 直接看 ES6 相关的 )</li>
<li>NodeJS 生态( npm 与相关的包 )</li>
<li>webpack ( 了解如何打包, 发布 )</li>
<li>HTML ( 尤其是 form 标签, 以及 HTML5 的内容 )</li>
<li>CSS ( 学习盒模型, 最新的 flex 布局, 以及 CSS3 )</li>
<li>API ( 掌握如何开发 API )</li>
</ul>
<p>你必须是前端工程师, 同时又是后端工程师, 才能真正摸清晰当下时代的发展, 成为弄潮儿!</p>
<h3 id="预测未来"><a href="#预测未来" class="headerlink" title="预测未来"></a>预测未来</h3><p>首先, 我在 2014 年分析 web 开发的文中提到的 gulp, grunt 都已经成为过去式了. Bower 也已经有点不合事宜了.<br>目前前端构建建议使用 webpack 和 npm 足够, 不需要更多的工具链, 应该越简单, 越顺手!<br>列几个关心的问题尝试预测一下.</p>
<ul>
<li><p>NodeJS 做后台开发怎么样 ?<br>NodeJS 已经是前端框架的一部分, 是极为成功的, 但对于 NodeJS 做后台开发说实在的, 它能够占一定的市场, 但将会非常少( 低于 5% ). 所以做 php 或 java 开发的朋友倒不用担心, 但如果只是搬砖写简单 API 的话, 就有危险了.</p>
</li>
<li><p>Rails 还行不行 ?<br>Rails 已经到了一定的顶点, 不可能再突破性增长, 但仍然是目前最为顺手的 web 开发框架, 它的前端解决方案目前仍有不错的体验与开发效率, 但可维护性比较差, 如果是我的话, 我会带领团队采用混合式的开发, 但现在不会是引入 AngularJS 而会是 VueJS.<br>但 Rails 已经到达它的极限点了, 而众多前端框架才刚刚开始.( 虽然拿 Rails 与前端框架比较不够合适 )    </p>
</li>
<li><p>AngularJS 还是 ReactJS ?<br>很简单, 建议直接上手 VueJS.<br>AnguarJS 第一版是个好的框架, 但 Angular2 并不是, 所以还不如直接学习 VueJS.<br>ReactJS 是个不错的框架, 但绝不是终点. VueJS 与 ReactJS 在实现上各有利弊. 两者可以择其一学之.</p>
</li>
<li><p>MeteorJS 值不值得学习 ?<br>我的建议是不值得, 因为它一开始就走在错误的道路上, 注定后面无路可走.</p>
</li>
<li><p>前端会取代 Native APP 开发么?<br>一定会的, 未来 3 年后, 至少有 70% 左右的 APP 会用前端开发方案, 比如使用类似于 Ionic 或 Meteor 这样的框架.</p>
</li>
</ul>
<h3 id="重新思考-web-开发"><a href="#重新思考-web-开发" class="headerlink" title="重新思考 web 开发"></a>重新思考 web 开发</h3><p>真正能长远的前端技术一定是简单的, 专注的, 比如 jQuery. 但目前几个框架都或多或少存在着问题.<br>ReactJS 不是表面那么简单, 而 AngularJS 更加复杂.<br>是否有更简单有效的解决它们的问题, 则能够成为下一代 web 前端框架.    </p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>





<!--网易云跟帖代码-->
<div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
<script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script>
<script>
var cloudTieConfig = {
url: document.location.href,
sourceId: "",
productKey: "17aa32dc2264402789450912a85cf52b",
target: "cloud-tie-wrapper"
};
var yunManualLoad = true;
Tie.loader("aHR0cHM6Ly9hcGkuZ2VudGllLjE2My5jb20vcGMvbGl2ZXNjcmlwdC5odG1s", true);
</script>



  
    <article id="post-git-常用命令汇总" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/03/git-常用命令汇总/" class="article-date">
  	<time datetime="2016-06-03T06:26:42.000Z" itemprop="datePublished">2016-06-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/03/git-常用命令汇总/">git 常用命令汇总</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><p>创建账户：</p>
<pre><code class="language-git">git config -global user.name &quot;Your name&quot;
git config -global user.email &quot;you@example.com&quot;
</code></pre>
<p>从仓库克隆到提交文件通用流程：</p>
<pre><code class="language-git"> git clone git@github.com:mmrxia/project-name.git
 git add .
 git commit -m &#39;update file&#39;
 git push -u origin master
</code></pre>
<p>查看当前git仓库文件状态：</p>
<pre><code class="language-git">git status
</code></pre>
<h3 id="其他技巧"><a href="#其他技巧" class="headerlink" title="其他技巧"></a>其他技巧</h3><ul>
<li>新建.gitignore文件</li>
</ul>
<pre><code class="language-git">touch .gitignore
</code></pre>
<ul>
<li>查看文件</li>
</ul>
<pre><code class="language-git">vim README.md
</code></pre>
<ul>
<li>查看提交历史记录</li>
</ul>
<pre><code class="language-git">git log
</code></pre>
<p>我们常用 <code>-p</code> 选项展开显示每次提交的内容差异，用 <code>-2</code> 则仅显示最近的两次更新。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bash/">bash</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>





<!--网易云跟帖代码-->
<div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
<script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script>
<script>
var cloudTieConfig = {
url: document.location.href,
sourceId: "",
productKey: "17aa32dc2264402789450912a85cf52b",
target: "cloud-tie-wrapper"
};
var yunManualLoad = true;
Tie.loader("aHR0cHM6Ly9hcGkuZ2VudGllLjE2My5jb20vcGMvbGl2ZXNjcmlwdC5odG1s", true);
</script>



  
    <article id="post-nodejs实践知识点汇总" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/03/nodejs实践知识点汇总/" class="article-date">
  	<time datetime="2016-06-03T02:21:03.000Z" itemprop="datePublished">2016-06-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/03/nodejs实践知识点汇总/">nodejs实践知识点汇总</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><p>1 . <strong>npm -v、node -v</strong>： 查看npm或nodejs版本。示例：</p>
<pre><code class="language-git">npm -v
</code></pre>
<p>2 . <strong>npm init</strong>： 会在当前目录引导创建一个package.json文件，包括名称、版本、作者这些信息等。示例：</p>
<pre><code class="language-git">npm init
</code></pre>
<p>3 . <strong>npm install</strong>： 根据package.json文件自动安装需要的模块。示例：</p>
<pre><code class="language-git">npm install
</code></pre>
<p>–save 命令，安装模块时，写入到package.json的依赖字段（dependencies）中。<br>使用<code>--save-dev</code>命令，可写入到开发依赖字段（devDependencies）中。<br>示例：</p>
<pre><code class="language-git">npm install express --save
</code></pre>
<p>-g 将包安装到全局环境中，如：</p>
<pre><code class="language-git">npm install express -g
</code></pre>
<p>4 . <strong>npm uninstall <name></name></strong>： 卸载node模块</p>
<p>5 . <strong>npm update <name></name></strong>： 更新node模块</p>
<p>6 . 其他</p>
<ul>
<li>npm root：查看当前包的安装路径</li>
<li>npm root -g：查看全局的包的安装路径</li>
<li>npm outdated：检查包是否已经过时，此命令会列出所有已经过时的包，可以及时进行包的更新</li>
<li>npm list：查看当前目录下已安装的node包</li>
<li>npm help：查看帮助命令</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/">nodejs</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>





<!--网易云跟帖代码-->
<div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
<script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script>
<script>
var cloudTieConfig = {
url: document.location.href,
sourceId: "",
productKey: "17aa32dc2264402789450912a85cf52b",
target: "cloud-tie-wrapper"
};
var yunManualLoad = true;
Tie.loader("aHR0cHM6Ly9hcGkuZ2VudGllLjE2My5jb20vcGMvbGl2ZXNjcmlwdC5odG1s", true);
</script>



  
    <article id="post-图片等比压缩居中显示" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/02/图片等比压缩居中显示/" class="article-date">
  	<time datetime="2016-06-02T08:16:21.000Z" itemprop="datePublished">2016-06-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/02/图片等比压缩居中显示/">图片等比压缩居中显示</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-需求"><a href="#1-需求" class="headerlink" title="1.需求"></a>1.需求</h3><p>某些场景如幻灯片切换展示，个人资料头像展示等。<br>如果图片所在的外容器具有一定的宽高，而图片却又是不定宽高时，就需要我们在显示时需要注意几点：<br>1、图片不能被拉伸变形<br>2、尽量友好的显示图片内容</p>
<h3 id="2-逻辑分析"><a href="#2-逻辑分析" class="headerlink" title="2.逻辑分析"></a>2.逻辑分析</h3><p>基于上面的需求，这就需要前端人员在控制显示的时候，尤其是一些图片尺寸过大，超出了外容器的图片，需要等比压缩居中显示；<br>对于尺寸太小，宽高都达不到外容器的范围的图片，最好也能居中显示，这样能保证最佳的显示效果。</p>
<p>那么这样才能做到等比压缩还居中显示呢？我们先看下图。</p>
<p>下面是一个宽高分别为200和100像素的外容器（块元素）。</p>
<p><img src="http://7xth8v.com2.z0.glb.qiniucdn.com/image/n_img_radio_commpress_01.jpg" alt=""></p>
<p>内部有一张图片： 高200px、宽250px</p>
<p><img src="http://7xth8v.com2.z0.glb.qiniucdn.com/image/n_img_radio_commpress_02.jpg" alt=""></p>
<p>经过等比压缩后，应该如下图所示：</p>
<p><img src="http://7xth8v.com2.z0.glb.qiniucdn.com/image/n_img_radio_commpress_03.jpg" alt=""></p>
<p>最终图片设置的宽高分别为200和160像素，这个是怎么算来的呢？</p>
<p>首先，我们分别取到宽高的最大压缩比ratio，也就是外容器像素值除以图片像素值。示例中分别是：<br>宽： 200/250 = 0.8<br>高： 100/200 = 0.5</p>
<p>所以我们取的max值是0.8，这样就能保证最终在计算的时候在宽度上完全撑满，即 250 * 0.8 = 200。</p>
<p>有了这个缩放比，自然就能计算出图片压缩后的高度，即 200 * 0.8 = 160。</p>
<p>确定了图片的宽高，接下来就需要图片居中显示，这时候只需要在外容器设置负的margin值就可以了，数值就是图片和容器差值的一半。</p>
<p>注意：这里涉及到一个问题，如果缩放比 ratio &gt; 1， 也就是图片的宽高都比外容器值小怎么办？<br>这种情况很简单，只需要保持图片在容器中居中就可以了，不改变原图片的尺寸。</p>
<p>核心代码如下：</p>
<pre><code class="language-javascript">/*外容器宽高*/
var wrapper = {
    width: me.parent().width(),
    height: me.parent().height()
};

var size = {}; //最终要设置的宽高

if (img.width &gt; 0 &amp;&amp; img.height &gt; 0) {
    var ratio_w = wrapper.width / img.width;
    var ratio_h = wrapper.height / img.height;

    var ratio = Math.max.apply(null, [ratio_w, ratio_h]);   //取比例最大值

    if (ratio &gt; 1) {
        size.width = img.width;
        size.height = img.height;
    } else {
        size.width = img.width * ratio;
        size.height = img.height * ratio;
    }

    /*设置样式*/
    me.css({
        &quot;width&quot;: size.width + &#39;px&#39;,
        &quot;height&quot;: size.height + &#39;px&#39;,
        &quot;margin-top&quot;: (wrapper.height - size.height) / 2 + &#39;px&#39;,
        &quot;margin-left&quot;: (wrapper.width - size.width) / 2 + &#39;px&#39;
    });
}
</code></pre>
<h3 id="3-调用方式："><a href="#3-调用方式：" class="headerlink" title="3.调用方式："></a>3.调用方式：</h3><p>结合以上逻辑，可以将代码进行封装，做成jquery插件的形式以供调用。<br>附上链接：<br><a href="https://github.com/mmrxia/lab/blob/master/examples/img-radio-compress/img-ratio-compress.js" target="_blank" rel="external">https://github.com/mmrxia/lab/blob/master/examples/img-radio-compress/img-ratio-compress.js</a></p>
<p>HTML:</p>
<pre><code class="language-html">&lt;div class=&quot;img-wrapper&quot;&gt;
    &lt;img class=&quot;img&quot; src=&quot;image/tmp_01.jpg&quot; alt=&quot;demo1&quot;/&gt;
&lt;/div&gt;
&lt;div class=&quot;img-wrapper&quot;&gt;
    &lt;img class=&quot;img&quot; src=&quot;image/tmp_02.jpg&quot; alt=&quot;demo2&quot;/&gt;
&lt;/div&gt;
&lt;div class=&quot;img-wrapper&quot;&gt;
    &lt;img class=&quot;img&quot; src=&quot;image/tmp_03.png&quot; alt=&quot;demo3&quot;/&gt;
&lt;/div&gt;
&lt;div class=&quot;img-wrapper&quot;&gt;
    &lt;img class=&quot;img&quot; src=&quot;image/tmp_04.png&quot; alt=&quot;demo4&quot;/&gt;
&lt;/div&gt;
</code></pre>
<p>CSS:</p>
<pre><code class="language-css">.img-wrapper{border: 1px dashed #2F9DC2;height: 100px;overflow: hidden;}
</code></pre>
<p>JS:</p>
<pre><code class="language-javascript">&lt;script src=&quot;../../static/js/lib/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;img-ratio-compress.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
    $(&#39;.img&#39;).ratioCompress({resize:true});
&lt;/script&gt;
</code></pre>
<h3 id="4-效果展示："><a href="#4-效果展示：" class="headerlink" title="4.效果展示："></a>4.效果展示：</h3><p><a href="https://rawgit.com/mmrxia/lab/master/examples/img-radio-compress/index.html" target="_blank" rel="external">点我查看示例</a></p>
<p><img src="http://7xth8v.com2.z0.glb.qiniucdn.com/image/n_img_radio_commpress.png" alt=""></p>
<p>（demo中设置了随窗口变化图片位置自适应，可以缩放浏览器尺寸或者F12调整为移动端模式查看。）</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>





<!--网易云跟帖代码-->
<div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
<script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script>
<script>
var cloudTieConfig = {
url: document.location.href,
sourceId: "",
productKey: "17aa32dc2264402789450912a85cf52b",
target: "cloud-tie-wrapper"
};
var yunManualLoad = true;
Tie.loader("aHR0cHM6Ly9hcGkuZ2VudGllLjE2My5jb20vcGMvbGl2ZXNjcmlwdC5odG1s", true);
</script>



  
    <article id="post-js-数组复制操作" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/22/js-数组复制操作/" class="article-date">
  	<time datetime="2016-05-22T03:31:55.000Z" itemprop="datePublished">2016-05-22</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/22/js-数组复制操作/">js 数组复制操作</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>js中数组和对象，使用“=”号赋值的时候，由于是引用类型，只是改变了引用对象的指针指向，改变值时会引起连锁反应。<br>简单效果如下：<br><img src="http://7xth8v.com2.z0.glb.qiniucdn.com/image/arr1.png" alt=""></p>
<p>避免指针指向的方法主要有一下几种：<br>（1）使用slice()方法。slice() 函数可从已有的数组中返回选定的元素；语法为：arr.slice(start,end);<br>slice()函数将会返回一个新的数组对象，所以使用slice(0)或slice()就可以实现数组的复制。如下：<br><img src="http://7xth8v.com2.z0.glb.qiniucdn.com/image/arr2.png" alt=""></p>
<p>（2）使用concat()方法。语法为：arr.concat(arr1,arr2,arr3,…,arrn);<br>concat()用于多个数组的合并，但是返回的结果是一个新的数组，而不再引用用于合并的任何一个数组。如下：<br><img src="http://7xth8v.com2.z0.glb.qiniucdn.com/image/arr3.png" alt=""></p>
<p>（3）笨方法：使用for循环；原理就不说了，直接上代码：<br><img src="http://7xth8v.com2.z0.glb.qiniucdn.com/image/arr4.png" alt=""></p>
<p>（4）使用jQuery的extend或merge方法：<br>$.extend 功能很强大，可以合并数组，对象！具体可参见jQuery api。<br><img src="http://7xth8v.com2.z0.glb.qiniucdn.com/image/arr5.png" alt=""></p>
<p>$.merge 只能合并一维数组，且一次只能合并2个，个人觉得没有concat方法强大。<br><img src="http://7xth8v.com2.z0.glb.qiniucdn.com/image/arr6.png" alt=""></p>
<p>其他参考：</p>
<ol>
<li><a href="http://www.html-js.com/article/1589" target="_blank" rel="external">javascript 原始类型和引用类型</a></li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数组/">数组</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>





<!--网易云跟帖代码-->
<div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
<script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script>
<script>
var cloudTieConfig = {
url: document.location.href,
sourceId: "",
productKey: "17aa32dc2264402789450912a85cf52b",
target: "cloud-tie-wrapper"
};
var yunManualLoad = true;
Tie.loader("aHR0cHM6Ly9hcGkuZ2VudGllLjE2My5jb20vcGMvbGl2ZXNjcmlwdC5odG1s", true);
</script>



  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2017 芥子园
    	</div>
      	<div class="footer-right">
      		Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>



<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-76943829-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->




<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
  <script src="http://7xth8v.com2.z0.glb.qiniucdn.com/js/prism.js"></script>
</body>
</html>